// Définition des types
type Utilisateur(#id: string, nom: string, prenom: string, age: number)
type Adresse(utilisateur_id: string, rue: string, ville: string)

// Définition des actions
action alert_mineur_lille(id: string, nom: string, prenom: string, rue: string)
action process_majeur_paris(id: string, nom: string, prenom: string, rue: string)
action apply_senior_benefits(id: string, nom: string, ville: string)
action offer_young_adult_services(id: string, nom: string, rue: string)

// Règle 1: Utilisateurs mineurs habitant Lille
rule r1 : {u: Utilisateur, a: Adresse} / u.id == a.utilisateur_id AND u.age < 18 AND a.ville == "Lille" ==> alert_mineur_lille(u.id, u.nom, u.prenom, a.rue)

// Règle 2: Utilisateurs majeurs habitant Paris
rule r2 : {u: Utilisateur, a: Adresse} / u.id == a.utilisateur_id AND u.age >= 18 AND a.ville == "Paris" ==> process_majeur_paris(u.id, u.nom, u.prenom, a.rue)

// Règle 3: Utilisateurs très âgés (>= 65) dans toutes les villes
rule r3 : {u: Utilisateur, a: Adresse} / u.id == a.utilisateur_id AND u.age >= 65 ==> apply_senior_benefits(u.id, u.nom, a.ville)

// Règle 4: Utilisateurs jeunes adultes (18-30) habitant Lyon
rule r4 : {u: Utilisateur, a: Adresse} / u.id == a.utilisateur_id AND u.age >= 18 AND u.age <= 30 AND a.ville == "Lyon" ==> offer_young_adult_services(u.id, u.nom, a.rue)
