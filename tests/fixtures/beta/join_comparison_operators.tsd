// Test opÃ©rateurs de comparaison dans jointures beta
type User(id: string, name: string, score: number, created: number)
type Activity(id: string, user_id: string, points: number, timestamp: number)


// Action definitions
action valid_activity(arg1: string, arg2: string)
action low_activity(arg1: string, arg2: string)
action different_score_activity(arg1: string, arg2: string)
action improvement_activity(arg1: string, arg2: string)

rule r1 : {u: User, a: Activity} / u.id == a.user_id AND a.points > u.score ==> improvement_activity(u.id, a.id)
rule r2 : {u: User, a: Activity} / u.id == a.user_id AND a.timestamp >= u.created ==> valid_activity(u.id, a.id)
rule r3 : {u: User, a: Activity} / u.id == a.user_id AND a.points <= 50 ==> low_activity(u.id, a.id)
rule r4 : {u: User, a: Activity} / u.id == a.user_id AND a.points != u.score ==> different_score_activity(u.id, a.id)

User(id:U001, name:Alice, score:75, created:1700000000)
User(id:U002, name:Bob, score:60, created:1700100000)
User(id:U003, name:Carol, score:90, created:1700200000)
Activity(id:A001, user_id:U001, points:80, timestamp:1700000100)
Activity(id:A002, user_id:U002, points:45, timestamp:1700050000)
Activity(id:A003, user_id:U001, points:75, timestamp:1699900000)
Activity(id:A004, user_id:U003, points:95, timestamp:1700300000)
