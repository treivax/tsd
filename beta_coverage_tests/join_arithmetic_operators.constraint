// Test opérateurs arithmétiques dans jointures beta
type Account : <id: string, balance: number, credit_limit: number, fees: number>
type Transaction : <id: string, account_id: string, amount: number, type: string>

rule r1 : {a: Account, t: Transaction} / a.id == t.account_id AND t.amount + a.fees <= a.balance ==> valid_transaction(a.id, t.id)
rule r2 : {a: Account, t: Transaction} / a.id == t.account_id AND a.balance + a.credit_limit >= t.amount * 2 ==> safe_transaction(a.id, t.id)
rule r3 : {a: Account, t: Transaction} / a.id == t.account_id AND (a.balance - t.amount) / a.credit_limit > 0.1 ==> conservative_transaction(a.id, t.id)
