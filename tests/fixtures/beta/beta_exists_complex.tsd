// Test Beta Join - Simplified (Complex EXISTS not yet supported)
type Company(#id: string, name: string, industry: string, size: string)
type Department(#id: string, company_id: string, name: string, budget: number)
type Employee(#id: string, department_id: string, name: string, position: string, salary: number)


// Action definitions
action well_funded_tech_company(arg1: string)
action has_senior_talent(arg1: string)
action well_managed_large_company(arg1: string)

rule r1 : {c: Company, d: Department} / c.industry == "tech" AND d.company_id == c.id AND d.budget > 1000000 ==> well_funded_tech_company(c.id)
rule r2 : {d: Department, e: Employee} / d.name == "engineering" AND e.department_id == d.id AND e.position == "senior" AND e.salary > 120000 ==> has_senior_talent(d.id)
rule r3 : {c: Company, d: Department, e: Employee} / c.size == "large" AND d.company_id == c.id AND e.department_id == d.id AND e.position == "director" AND d.budget > 500000 ==> well_managed_large_company(c.id)

Company(id:"COMP001", name:"TechCorp", industry:"tech", size:"large")
Company(id:"COMP002", name:"FinanceInc", industry:"finance", size:"medium")
Company(id:"COMP003", name:"StartupXYZ", industry:"tech", size:"small")

Department(id:"DEPT001", company_id:"COMP001", name:"engineering", budget:2500000)
Department(id:"DEPT002", company_id:"COMP001", name:"marketing", budget:800000)
Department(id:"DEPT003", company_id:"COMP002", name:"engineering", budget:1200000)  
Department(id:"DEPT004", company_id:"COMP003", name:"engineering", budget:300000)

Employee(id:"EMP001", department_id:"DEPT001", name:"Alice Director", position:"director", salary:180000)
Employee(id:"EMP002", department_id:"DEPT001", name:"Bob Senior", position:"senior", salary:135000)
Employee(id:"EMP003", department_id:"DEPT001", name:"Charlie Junior", position:"junior", salary:85000)
Employee(id:"EMP004", department_id:"DEPT003", name:"Diana Senior", position:"senior", salary:125000)
Employee(id:"EMP005", department_id:"DEPT004", name:"Eve Intern", position:"intern", salary:45000)