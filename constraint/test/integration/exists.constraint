// Test 4 : Quantification Existentielle (ExistsNode)  
// Types pour tests d'existence
type Account : <id: string, owner: string, balance: number, type: string>
type Transaction : <id: string, account_id: string, amount: number, type: string, timestamp: number>
type Alert : <account_id: string, type: string, severity: string, message: string>

// Existence simple - il existe au moins une transaction suspecte
{a: Account} / EXISTS (t: Transaction / t.account_id == a.id AND t.amount > 10000)

// Existence avec conditions multiples
{a: Account} / EXISTS (t: Transaction / t.account_id == a.id AND t.amount > 5000 AND t.type == "withdrawal")

// Existence avec fonctions
{a: Account} / EXISTS (t: Transaction / t.account_id == a.id AND LENGTH(t.type) > 5 AND UPPER(t.type) CONTAINS "SUSPICIOUS")

// Existence avec expressions arithmétiques
{a: Account} / EXISTS (t: Transaction / t.account_id == a.id AND t.amount > a.balance * 0.5)

// Existence combinée avec conditions normales
{a: Account} / a.balance > 1000 AND EXISTS (t: Transaction / t.account_id == a.id AND t.amount < 0)

// Existence avec négation interne
{a: Account} / EXISTS (t: Transaction / t.account_id == a.id AND NOT (t.type == "normal"))

// Existence multiple - deux variables existentielles
{a: Account} / EXISTS (t: Transaction / t.account_id == a.id AND t.amount > 1000) AND EXISTS (alert: Alert / alert.account_id == a.id AND alert.severity == "high")

// Existence avec opérateurs avancés
{a: Account} / EXISTS (t: Transaction / t.account_id == a.id AND t.type IN ["withdrawal", "transfer"] AND t.timestamp > 1700000000)

// Existence imbriquée (EXISTS dans EXISTS - complexe)
{a: Account} / EXISTS (t: Transaction / t.account_id == a.id AND EXISTS (alert: Alert / alert.account_id == t.account_id AND alert.severity != "low"))

// Existence avec conditions d'agrégation (hybride ExistsNode + AccumulateNode)
{a: Account} / EXISTS (t: Transaction / t.account_id == a.id AND SUM(t.amount) > 50000)