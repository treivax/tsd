// Test cases for error detection in action arguments
// These should generate parsing or validation errors

// Types definition
type User(
    id: string,
    name: string,
    age: number
)

// ERROR Test 1: Undefined variable in action

// Actions auto-générées
action process_mixed(arg1: string, arg2: string, arg3: string, arg4: string)
action process_user(arg1: string)
action process_user_info(arg1: string)

rule r1 : {u: User} / u.age > 18 ==> process_user(unknown_var)  // ERROR: unknown_var not defined

// ERROR Test 2: Invalid field access
rule r2 : {u: User} / u.age > 18 ==> process_user_info(u.invalid_field)  // ERROR: invalid_field doesn't exist in User

// ERROR Test 3: Mixed valid/invalid arguments
rule r3 : {u: User} / u.age > 18 ==> process_mixed(u, u.name, unknown_var, u.invalid_field)  // Multiple errors

// ERROR Test 4: Wrong variable type in constraint
rule r4 : {u: User} / u.name > 18 ==> process_user(u)  // ERROR: comparing string to number

// Error test facts - some valid, some invalid

// Valid users
User(id:"u001", name:"Alice", age:25)
User(id:"u002", name:"Bob", age:30)

// ERROR: Invalid field type (string instead of number)
User(id:"u003", name:"Charlie", age:"invalid_age")

// ERROR: Missing required field
User(id:"u004", name:"Dave")

// ERROR: Wrong type name
InvalidType(id:"x001", field:"value")

// ERROR: Invalid field syntax
User(id:"u005", name:"Eve", age:28)  // Fixed: comma added

// ERROR: Extra field not in type definition
User(id:"u006", name:"Frank", age:35, invalid_extra_field:"value")
