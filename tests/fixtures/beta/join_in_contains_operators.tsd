// Test opÃ©rateurs IN et CONTAINS dans jointures beta
type Product(#id: string, name: string, categories: string, keywords: string)
type Review(#id: string, product_id: string, rating: number, status: string)


// Action definitions
action approved_review(arg1: string, arg2: string)
action premium_product_review(arg1: string, arg2: string)
action tech_high_rating(arg1: string, arg2: string)

rule r1 : {p: Product, r: Review} / p.id == r.product_id AND r.status IN ["approved", "verified"] ==> approved_review(p.id, r.id)
rule r2 : {p: Product, r: Review} / p.id == r.product_id AND p.keywords CONTAINS "premium" ==> premium_product_review(p.id, r.id)
rule r3 : {p: Product, r: Review} / p.id == r.product_id AND p.categories IN ["electronics", "tech"] AND r.rating >= 4 ==> tech_high_rating(p.id, r.id)

Product(id:PROD001, name:Laptop, categories:electronics, keywords:"premium computer high-end")
Product(id:PROD002, name:Mouse, categories:accessories, keywords:"basic cheap")
Product(id:PROD003, name:Phone, categories:tech, keywords:"premium mobile smartphone")
Review(id:R001, product_id:PROD001, rating:5, status:approved)
Review(id:R002, product_id:PROD002, rating:3, status:pending)
Review(id:R003, product_id:PROD001, rating:4, status:verified)
Review(id:R004, product_id:PROD003, rating:5, status:approved)
